<!DOCTYPE html>
<html>
	<head>
		<style>
			/* Set the size of the div element that contains the map */
			#map {
				height: 400px;
				/* The height is 400 pixels */
				width: 100%;
				/* The width is the width of the web page */
			}
		</style>
	</head>

	<body>
		<h3>Bản đồ</h3>
		<div id="floating-panel">
			<b>Geocode: </b>
			<input id="address" type="textbox" value="Sydney, NSW" />
			<input id="submit" type="button" value="Geocode" />
			<br />
			<input type="button" value="Start" id="findPlace" />

			<input type="text" id="start" />

			<input type="text" id="end" />
			<input type="button" id="getWay" value="Tìm đường" />
			<br />

			<b>Mode of Travel: </b>
			<select id="mode">
				<option value="DRIVING">Driving</option>
				<option value="WALKING">Walking</option>
				<option value="BICYCLING">Bicycling</option>
				<option value="TRANSIT">Transit</option>
			</select>
		</div>
		<form>
			<input type="text" id="name" placeholder="Nhập tên địa điểm" />
			<input type="text" id="latitude" placeholder="Nhập vĩ độ" />
			<input type="text" id="longitude" placeholder="Nhập kinh độ" />
			<br /><br />
			<input type="text" id="content" placeholder="Nhập ghi chú" />
			<input type="button" value="Thêm địa điểm" onclick="addPlace()" />
			<input
				type="button"
				value="Reset marker"
				onclick="reloadMarkers()"
			/>
			<br />
		</form>
		<br />
		<input type="button" value="Draw path with Data" onclick="drawPath()" />
		<input
			type="button"
			value="Remove path with Data"
			onclick="removePath(flightPath)"
		/>
		<br />

		<br />
		<input
			type="button"
			value="Draw path with Hand"
			onclick="drawPathWithHand()"
		/>
		<input
			type="button"
			value="Remove path with Hand"
			onclick="removePath(poly)"
		/>
		<br />

		<br />
		<input type="button" value="Draw Rectange" onclick="drawRectangle()" />
		<input
			type="button"
			value="Remove Rectange"
			onclick="removePath(rectangle)"
		/>
		<br />
		<br />
		<input type="button" value="get array lat lng" onclick="makeRegion()" />
		<br />
		<!--The div element for the map -->
		<div id="map"></div>
		<script
			async
			defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&callback=initMap"
		></script>
		<script>
			var map;
			var directionsRenderer;
			var directionsService;
			var westLake = { lat: 21.053225, lng: 105.824852 };
			var places = [
				["Lăng chủ tịch", 21.036873, 105.834979, 4],
				["Phủ tây hồ", 21.055928, 105.819733, 5],
				["Thung lũng hoa", 21.074799, 105.819014, 3]
			];
			var markers = [];
			var info = [
				'<div id="content">' +
					'<div id="siteNotice">' +
					"</div>" +
					'<h1 id="firstHeading" class="firstHeading">Lăng chủ tịch</h1>' +
					'<div id="bodyContent">' +
					'<p>Vietnamese leader Ho Chi Minh"s body is on display in this mausoleum & historic site.</p>' +
					"</div>" +
					"</div>",
				'<div id="content">' +
					'<div id="siteNotice">' +
					"</div>" +
					'<h1 id="firstHeading" class="firstHeading">Lăng chủ tịch</h1>' +
					'<div id="bodyContent">' +
					'<p>Vietnamese leader Ho Chi Minh"s body is on display in this mausoleum & historic site.</p>' +
					"</div>" +
					"</div>",
				'<div id="content">' +
					'<div id="siteNotice">' +
					"</div>" +
					'<h1 id="firstHeading" class="firstHeading">Lăng chủ tịch</h1>' +
					'<div id="bodyContent">' +
					'<p>Vietnamese leader Ho Chi Minh"s body is on display in this mausoleum & historic site.</p>' +
					"</div>" +
					"</div>"
			];

			// Initialize and add the map
			function reloadMarkers() {
				// Loop through markers and set map to null for each
				for (var i = 0; i < markers.length; i++) {
					markers[i].setMap(null);
				}

				// Reset the markers array
				markers = [];

				// Call set markers to re-add markers
				setMarkers(places);
			}
			s;
			function addPlace() {
				const name = document.getElementById("name").value;
				const lat = document.getElementById("latitude").value;
				const lng = document.getElementById("longitude").value;
				let content = document.getElementById("content").value;
				var myLatLng = new google.maps.LatLng(lat, lng);
				content =
					'<div id="content">' +
					'<div id="siteNotice">' +
					"</div>" +
					'<h1 id="firstHeading" class="firstHeading">' +
					name +
					"</h1>" +
					'<div id="bodyContent">' +
					"<p>" +
					content +
					"</p>" +
					"</div>" +
					"</div>";
				const infowindow = new google.maps.InfoWindow({
					content,
					maxWidth: 300
				});
				const marker = new google.maps.Marker({
					position: myLatLng,
					map: map,
					animation: google.maps.Animation.DROP,
					title: name,
					zIndex: 1
				});
				marker.addListener("click", function() {
					infowindow.open(map, marker);
				});
				marker.addListener("dblclick", function() {
					marker.setMap(null);
				});
				markers.push(marker);
			}

			function addMarker(location) {
				var marker = new google.maps.Marker({
					position: location,
					animation: google.maps.Animation.DROP,
					map: map
				});
				marker.addListener("dblclick", function() {
					marker.setMap(null);
				});
				markers.push(marker);
			}

			function setMarkers(locations) {
				for (var i = 0; i < locations.length; i++) {
					var place = locations[i];
					const infowindow = new google.maps.InfoWindow({
						content: info[i],
						maxWidth: 300
					});
					const marker = new google.maps.Marker({
						position: { lat: place[1], lng: place[2] },
						map: map,
						animation: google.maps.Animation.DROP,
						title: place[0],
						zIndex: place[3]
					});
					marker.addListener("click", function() {
						infowindow.open(map, marker);
					});
					marker.addListener("dblclick", function() {
						marker.setMap(null);
					});
					markers.push(marker);
				}
			}

			function initMap() {
				map = new google.maps.Map(document.getElementById("map"), {
					zoom: 13,
					center: westLake
				});

				directionsService = new google.maps.DirectionsService();
				directionsRenderer = new google.maps.DirectionsRenderer({
					draggable: true,
					map: map
				});
				map.addListener("click", function(event) {
					addMarker(event.latLng);
				});
				setMarkers(places);
				// The marker, positioned at Uluru
				var geocoder = new google.maps.Geocoder();

				directionsRenderer.setMap(map);

				var onChangeHandler = function() {
					calculateAndDisplayRoute(
						directionsService,
						directionsRenderer
					);
				};
				document
					.getElementById("start")
					.addEventListener("change", onChangeHandler);
				document
					.getElementById("end")
					.addEventListener("change", onChangeHandler);
				document
					.getElementById("mode")
					.addEventListener("change", onChangeHandler);
				document
					.getElementById("submit")
					.addEventListener("click", function() {
						geocodeAddress(geocoder, map);
					});
			}

			function geocodeAddress(geocoder, resultsMap) {
				var address = document.getElementById("address").value;
				geocoder.geocode(
					{
						address: address
					},
					function(results, status) {
						if (status === "OK") {
							resultsMap.setCenter(results[0].geometry.location);
							var marker = new google.maps.Marker({
								map: resultsMap,
								position: results[0].geometry.location
							});
						} else {
							alert(
								"Geocode was not successful for the following reason: " +
									status
							);
						}
					}
				);
			}

			function calculateAndDisplayRoute(
				directionsService,
				directionsRenderer
			) {
				directionsService.route(
					{
						origin: {
							query: document.getElementById("start").value
						},
						destination: {
							query: document.getElementById("end").value
						},
						travelMode: "DRIVING"
					},
					function(response, status) {
						if (status === "OK") {
							directionsRenderer.setDirections(response);
						} else {
							window.alert(
								"Directions request failed due to " + status
							);
						}
					}
				);
			}
		</script>
		<!--Load the API from the specified URL
    * The async attribute allows the browser to render the page while the API loads
    * The key parameter will contain your own API key (which is not needed for this tutorial)
    * The callback parameter executes the initMap() function
    -->
		<script
			async
			defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDO6xwXdudsBWYD1asUmmLtT9Sj9XdXufA&callback=initMap"
		></script>
	</body>
</html>
